<?xml version="1.0" encoding="UTF-8"?>

<!--  
	课程sql
-->
<sql-statement namespace="platform.course">
		
	<!-- 查询所有用户 -->
	<sql id="all">
		<![CDATA[ 
        	select ids from edu_course
    	]]>
	</sql>
	
	<!-- 根据部门Id查询，人员树节点数据 -->
	<sql id="treeUserNode">
		<![CDATA[ 
        	select ids, courseName as names from edu_course where departmentIds = ? order by courseName asc
    	]]>
	</sql>
	
	<!-- 查询用户，自定义字段和值 -->
	<sql id="column">
		<![CDATA[ 
        	select * from edu_course where ${column} = ?
    	]]>
	</sql>
	
	<!-- 停用账户 -->
	<sql id="stop">
		<![CDATA[ 
        	update edu_course u set u.stopDate = ? , u.errorCount = ? where u.ids = ? 
    	]]>
	</sql>
	
	<!-- 启用停用账户 -->
	<sql id="start">
		<![CDATA[ 
        	update edu_course u set u.stopdate = null, u.errorcount = 0 where u.ids = ?
    	]]>
	</sql>
	
	<!-- 动态SQL处理 -->
	<sql id="splitPage">
		<![CDATA[ 
        	from edu_course u 
			where 1=1 
		
			
			<% if(!isEmpty(courseName)){ %>
					and u.courseName like #'%$courseName$%'#
			<% } %>
	    	<% if(!isEmpty(user_cousre_ids)){ %>
					and u.user_cousre_ids like #'%$user_cousre_ids$%'#
			<% } %>
			
			<% if(!isEmpty(classify)){ %>
					and u.classify like #'%$classify$%'#
			<% } %>
			
			<% if(!isEmpty(difficulty)){ %>
					and u.difficulty like #'%$difficulty$%'#
			<% } %>
			
			<% if(!isEmpty(picUrl)){ %>
					and u.picUrl like #'%$picUrl$%'#
			<% } %>
			
			<% if(!isEmpty(description)){ %>
					and u.description like #'%$description$%'#
			<% } %>
			
			<% if(!isEmpty(createTime)){ %>
					and u.createTime like #'%$createTime$%'#
			<% } %>
			
			<% if(!isEmpty(endTime)){ %>
					and u.endTime like #'%$endTime$%'#
			<% } %>
			
			<% if(!isEmpty(chapterIds)){ %>
					and u.chapterIds = #'$chapterIds$'#
			<% } %>
    	]]>
	</sql>

</sql-statement>